<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>For Clara üåπ</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
  <style>
    /* Deep Space Background */
    body {
      background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      color: white;
    }

    /* Twinkling Star Styles */
    .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        box-shadow: 0 0 2px #ffffff, 0 0 4px #ffffff; 
        animation: twinkle linear infinite;
        z-index: -1;
    }

    @keyframes twinkle {
        0% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
        100% { opacity: 0.3; transform: scale(1); }
    }

    /* Hyperspace Animation (Triggered later) */
    @keyframes hyperSpeed {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(100vh) scale(2); opacity: 0; }
    }
    
    /* Button Animation */
    .heartbeat {
      animation: heartbeat 1.5s ease infinite;
    }
    @keyframes heartbeat {
      0% { transform: scale(1); }
      14% { transform: scale(1.1); }
      28% { transform: scale(1); }
      42% { transform: scale(1.1); }
      70% { transform: scale(1); }
    }
    
    #noButton {
      transition: 0.1s;
      z-index: 50;
    }

    /* Video Player Style */
    #spaceshipVideo {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        height: 100%;
        z-index: 90;
        object-fit: cover;
        mix-blend-mode: screen; 
        pointer-events: none;
    }

    /* Final Message Container (Hidden initially) */
    #successContainer {
        display: none; /* KEY CHANGE: Hidden until video ends */
        flex-direction: column;
        align-items: center;
        z-index: 100;
        text-align: center;
        text-shadow: 0 4px 10px rgba(0,0,0,0.8); 
    }
  </style>
</head>
<body>
  
  <audio id="bgMusic">
    <source src="./chanting.mp3" type="audio/mpeg">
  </audio>

  <video id="spaceshipVideo">
    <source src="./Spaceship.mp4" type="video/mp4">
  </video>

  <div id="mainContainer" class="flex flex-col items-center p-4 text-center z-10">
    <img id="imageDisplay" src="./images/image1.gif" alt="Cute bear" class="rounded-md h-[300px] object-cover mb-4" />
    
    <h2 id="valentineQuestion" class="text-4xl font-bold italic text-pink-500 mb-2">
      Will you be my Valentine, Clara? üåπ
    </h2>
    
    <p class="text-xl font-semibold text-gray-300 mb-6">
      I dare you to say no üòè
    </p>
    
    <div class="flex gap-4 items-center justify-center w-full relative h-20">
      <button id="yesButton"
        class="heartbeat rounded-md text-[20px] font-medium hover:bg-green-400 bg-green-500 text-white px-8 py-4 transition shadow-lg shadow-green-500/50">
        Yes
      </button>

      <button id="noButton"
        class="rounded-md text-[20px] font-medium bg-red-500 text-white px-8 py-4 shadow-lg shadow-red-500/50 hover:bg-red-700">
        No
      </button>
    </div>
  </div>

  <div id="successContainer">
    <div class="text-5xl font-bold text-pink-500 mb-4 animate-bounce">Congrats, you scored a baddie! ü•µ</div>
    <div class="text-3xl font-bold text-white">You're cordially invited to be dicked down üçÜ</div>
  </div>

  <script>
    // Star Generator
    function createStars() {
      const numStars = 150;
      const body = document.body;
      for (let i = 0; i < numStars; i++) {
        let star = document.createElement("div");
        star.className = "star";
        var x = Math.random() * window.innerWidth;
        var y = Math.random() * window.innerHeight;
        star.style.left = x + 'px';
        star.style.top = y + 'px';
        var size = (Math.random() * 2) + 1;
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.animationDuration = (Math.random() * 3 + 2) + 's';
        star.style.animationDelay = (Math.random() * 2) + 's';
        body.appendChild(star);
      }
    }
    createStars();

    function engageHyperdrive() {
      const stars = document.querySelectorAll('.star');
      stars.forEach(star => {
        const speed = (Math.random() * 0.5) + 0.2;
        star.style.animation = `hyperSpeed ${speed}s linear infinite`;
      });
    }

    const yesButton = document.getElementById('yesButton');
    const noButton = document.getElementById('noButton');
    const mainContainer = document.getElementById('mainContainer');
    const successContainer = document.getElementById('successContainer');
    const videoElement = document.getElementById('spaceshipVideo');
    const audio = document.getElementById("bgMusic");

    // Instant Runaway Button
    const moveButton = function () {
      const maxWidth = window.innerWidth - noButton.offsetWidth - 20;
      const maxHeight = window.innerHeight - noButton.offsetHeight - 20;
      const x = Math.random() * maxWidth;
      const y = Math.random() * maxHeight;
      noButton.style.position = "fixed"; 
      noButton.style.left = `${x}px`;
      noButton.style.top = `${y}px`;
    };
    noButton.addEventListener("mouseover", moveButton);
    noButton.addEventListener("click", moveButton);

    // CLICK YES LOGIC
    yesButton.addEventListener("click", () => {
      // 1. Hide Question
      mainContainer.style.display = 'none';
      document.querySelector('p').style.display = 'none';

      // 2. Play Video & Music
      videoElement.style.display = 'block';
      videoElement.play();
      audio.play().catch(e => console.log("Audio error: ", e));
      
      // 3. WHEN VIDEO ENDS -> Show Text & Hyperspace
      videoElement.onended = function() {
        videoElement.style.opacity = '0';
        videoElement.style.transition = 'opacity 1s';
        
        // Show Text
        successContainer.style.display = 'flex';
        
        // Stars go fast
        engageHyperdrive();

        // Confetti
        confetti({
          particleCount: 150,
          spread: 100,
          origin: { y: 0.6 },
          colors: ['#ff69b4', '#ffffff', '#00c3ff']
        });

        startBouncingImage();
      };
    });

    // Bouncing Image Logic
    function startBouncingImage() {
      const bounceImage = document.createElement("img");
      bounceImage.src = "./images/us.jpg"; 
      bounceImage.onerror = function() { this.style.display = 'none'; };
      
      bounceImage.style.position = "fixed"; 
      bounceImage.style.width = "200px";
      bounceImage.style.height = "200px";
      bounceImage.style.borderRadius = "50%";
      bounceImage.style.border = "5px solid #ec4899"; 
      bounceImage.style.objectFit = "cover";
      bounceImage.style.zIndex = "0"; 
      document.body.appendChild(bounceImage);

      let x = Math.random() * window.innerWidth;
      let y = Math.random() * window.innerHeight;
      let dx = 3; let dy = 3;

      function animateBounce() {
        if (x + 200 >= window.innerWidth || x <= 0) dx = -dx;
        if (y + 200 >= window.innerHeight || y <= 0) dy = -dy;
        x += dx;
        y += dy;
        bounceImage.style.left = x + "px";
        bounceImage.style.top = y + "px";
        requestAnimationFrame(animateBounce);
      }
      animateBounce();
    }
  </script>
</body>
</html>

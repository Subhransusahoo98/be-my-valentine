<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>For Clara üåπ</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
  <style>
    /* NEW: Deep Space Background */
    body {
      /* Deep blue/black gradient */
      background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
      height: 100vh;
      width: 100vw;
      overflow: hidden; /* Prevents scrollbars when button moves */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      color: white; /* Default text color white for dark bg */
    }

    /* NEW: Twinkling Star Styles */
    .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        /* Glowing effect */
        box-shadow: 0 0 2px #ffffff, 0 0 4px #ffffff; 
        animation: twinkle linear infinite;
        z-index: -1; /* Send behind everything */
    }

    @keyframes twinkle {
        0% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
        100% { opacity: 0.3; transform: scale(1); }
    }
    
    /* Existing Button Animations */
    .heartbeat {
      animation: heartbeat 1.5s ease infinite;
    }
    @keyframes heartbeat {
      0% { transform: scale(1); }
      14% { transform: scale(1.1); }
      28% { transform: scale(1); }
      42% { transform: scale(1.1); }
      70% { transform: scale(1); }
    }
    
    /* Make sure No button is always on top */
    #noButton {
      transition: 0.1s; /* Smooth start */
      z-index: 50; /* Ensures it stays on top of images/text */
    }
  </style>
</head>
<body>
  
  <audio id="bgMusic" loop>
    <source src="https://github.com/sound-effects-library/romantic-music/raw/main/romantic-piano.mp3" type="audio/mpeg">
  </audio>

  <div id="mainContainer" class="flex flex-col items-center p-4 text-center z-10">
    <img id="imageDisplay" src="./images/image1.gif" alt="Cute bear" class="rounded-md h-[300px] object-cover mb-4" />
    
    <h2 id="valentineQuestion" class="text-4xl font-bold italic text-pink-500 mb-2">
      Will you be my Valentine, Clara? üåπ
    </h2>
    
    <p class="text-xl font-semibold text-gray-300 mb-6">
      I dare you to say no üòè
    </p>
    
    <div class="flex gap-4 items-center justify-center w-full relative h-20">
      <button id="yesButton"
        class="heartbeat rounded-md text-[20px] font-medium hover:bg-green-400 bg-green-500 text-white px-8 py-4 transition shadow-lg shadow-green-500/50">
        Yes
      </button>

      <button id="noButton"
        class="rounded-md text-[20px] font-medium bg-red-500 text-white px-8 py-4 shadow-lg shadow-red-500/50 hover:bg-red-700">
        No
      </button>
    </div>
  </div>

  <script>
    // --- NEW: Generate Twinkling Stars ---
    function createStars() {
      const numStars = 150; // How many stars
      const body = document.body;
      for (let i = 0; i < numStars; i++) {
        let star = document.createElement("div");
        star.className = "star";
        
        // Random Position
        var x = Math.random() * window.innerWidth;
        var y = Math.random() * window.innerHeight;
        star.style.left = x + 'px';
        star.style.top = y + 'px';
        
        // Random Size (tiny to small)
        var size = (Math.random() * 2) + 1;
        star.style.width = size + 'px';
        star.style.height = size + 'px';

        // Random Twinkle Speed and Delay so they don't blink together
        star.style.animationDuration = (Math.random() * 3 + 2) + 's'; // between 2 and 5s
        star.style.animationDelay = (Math.random() * 2) + 's';

        body.appendChild(star);
      }
    }
    // Run star generator immediately
    createStars();


    // --- EXISTING LOGIC ---
    const yesButton = document.getElementById('yesButton');
    const noButton = document.getElementById('noButton');
    const imageDisplay = document.getElementById('imageDisplay');
    const valentineQuestion = document.getElementById('valentineQuestion');
    const mainContainer = document.getElementById('mainContainer');

    // 1. Music Starter
    document.body.addEventListener('click', function() {
      const audio = document.getElementById("bgMusic");
      audio.play().catch(error => console.log("Audio play failed usually because user didn't interact yet"));
    }, { once: true });

    // 2. Instant Runaway Button Logic
    const moveButton = function () {
      const maxWidth = window.innerWidth - noButton.offsetWidth - 20;
      const maxHeight = window.innerHeight - noButton.offsetHeight - 20;

      const x = Math.random() * maxWidth;
      const y = Math.random() * maxHeight;

      noButton.style.position = "fixed"; 
      noButton.style.left = `${x}px`;
      noButton.style.top = `${y}px`;
    };

    noButton.addEventListener("mouseover", moveButton);
    noButton.addEventListener("click", moveButton);

    // 3. Success Logic
    yesButton.addEventListener("click", () => {
      document.getElementById('yesButton').style.display = 'none';
      document.getElementById('noButton').style.display = 'none';
      imageDisplay.style.display = 'none';
      document.querySelector('p').style.display = 'none';

      // Updated Success colors for dark theme
      valentineQuestion.innerHTML = `
        <img src="./images/image7.gif" alt="Celebration" class="mx-auto h-[300px] rounded-md mb-4"/>
        <div class="text-5xl font-bold text-pink-500">Yay! I knew it! ‚ù§Ô∏è</div>
        <div class="text-2xl mt-4 font-bold text-white">Pick you up at 8pm? üç£ü•Ç</div>
      `;

      confetti({
        particleCount: 150,
        spread: 100,
        origin: { y: 0.6 },
        colors: ['#ff69b4', '#ffffff', '#00c3ff'] // Changed confetti colors to fit space theme better
      });

      const bounceImage = document.createElement("img");
      bounceImage.src = "./images/us.jpg"; 
      bounceImage.onerror = function() { this.style.display = 'none'; };
      
      bounceImage.style.position = "fixed"; 
      bounceImage.style.width = "200px";
      bounceImage.style.height = "200px";
      bounceImage.style.borderRadius = "50%";
      bounceImage.style.border = "5px solid #ec4899"; // Pink border
      bounceImage.style.objectFit = "cover";
      bounceImage.style.zIndex = "0"; 
      document.body.appendChild(bounceImage);

      let x = Math.random() * window.innerWidth;
      let y = Math.random() * window.innerHeight;
      let dx = 3; let dy = 3;

      function animateBounce() {
        if (x + 200 >= window.innerWidth || x <= 0) dx = -dx;
        if (y + 200 >= window.innerHeight || y <= 0) dy = -dy;
        x += dx;
        y += dy;
        bounceImage.style.left = x + "px";
        bounceImage.style.top = y + "px";
        requestAnimationFrame(animateBounce);
      }
      animateBounce();
    });
  </script>
</body>
</html>

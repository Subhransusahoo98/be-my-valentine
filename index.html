<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>For Clara üåπ</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
  <style>
    /* Deep Space Background */
    body {
      background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
      height: 100vh;
      width: 100vw;
      overflow: hidden; 
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      color: white;
      -webkit-tap-highlight-color: transparent;
    }

    /* Twinkling Star Styles */
    .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        box-shadow: 0 0 2px #ffffff, 0 0 4px #ffffff; 
        animation: twinkle linear infinite;
        z-index: -1;
    }

    @keyframes twinkle {
        0% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
        100% { opacity: 0.3; transform: scale(1); }
    }

    /* Hyperspace Animation */
    @keyframes hyperSpeed {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(100vh) scale(2); opacity: 0; }
    }
    
    .heartbeat {
      animation: heartbeat 1.5s ease infinite;
    }
    @keyframes heartbeat {
      0% { transform: scale(1); }
      14% { transform: scale(1.1); }
      28% { transform: scale(1); }
      42% { transform: scale(1.1); }
      70% { transform: scale(1); }
    }
    
    #noButton {
      transition: 0.1s;
      z-index: 50;
      touch-action: none; 
    }

    /* Video Player - Muted & Transparent Background */
    #spaceshipVideo {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        height: 100%;
        z-index: 90;
        object-fit: cover;
        mix-blend-mode: screen; 
        pointer-events: none;
    }

    #successContainer {
        display: none; 
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        z-index: 100;
        text-align: center;
        text-shadow: 0 4px 10px rgba(0,0,0,0.8); 
        padding: 20px;
    }
  </style>
</head>
<body>
  
  <audio id="bgMusic" loop autoplay>
    <source src="https://ia800504.us.archive.org/11/items/HaloThemeSongOriginal/Halo%20Theme%20Song%20Original.mp3" type="audio/mpeg">
  </audio>

  <video id="spaceshipVideo" muted playsinline webkit-playsinline>
    <source src="./Spaceship.mp4" type="video/mp4">
  </video>

  <div id="mainContainer" class="flex flex-col items-center p-4 text-center z-10 w-full max-w-md">
    <img id="imageDisplay" src="./images/image1.gif" alt="Cute bear" class="rounded-md h-[250px] md:h-[300px] object-cover mb-4" />
    
    <h2 id="valentineQuestion" class="text-3xl md:text-4xl font-bold italic text-pink-500 mb-2 leading-tight">
      Will you be my Valentine, Clara? üåπ
    </h2>
    
    <p class="text-lg md:text-xl font-semibold text-gray-300 mb-6">
      I dare you to say no üòè
    </p>
    
    <div class="flex gap-4 items-center justify-center w-full relative h-20">
      <button id="yesButton"
        class="heartbeat rounded-md text-[18px] md:text-[20px] font-medium hover:bg-green-400 bg-green-500 text-white px-6 py-3 md:px-8 md:py-4 transition shadow-lg shadow-green-500/50">
        Yes
      </button>

      <button id="noButton"
        class="rounded-md text-[18px] md:text-[20px] font-medium bg-red-500 text-white px-6 py-3 md:px-8 md:py-4 shadow-lg shadow-red-500/50 hover:bg-red-700">
        No
      </button>
    </div>
  </div>

  <div id="successContainer">
    <div class="text-3xl md:text-5xl font-bold text-pink-500 mb-4 animate-bounce leading-tight">
      Congrats, you scored a baddie! ü•µ
    </div>
    <div class="text-xl md:text-3xl font-bold text-white leading-snug">
      You're cordially invited to be dicked down üçÜ
    </div>
  </div>

  <script>
    // --- 1. AGGRESSIVE AUDIO UNLOCKER ---
    const audio = document.getElementById("bgMusic");
    
    function unlockAudio() {
        // If it's paused, play it
        if (audio.paused) {
            audio.volume = 0.6; 
            audio.play().then(() => {
                // If successful, we can remove the listeners to save memory
                document.removeEventListener('click', unlockAudio);
                document.removeEventListener('touchstart', unlockAudio);
                document.removeEventListener('scroll', unlockAudio);
            }).catch(e => {
                console.log("Auto-play blocked, waiting for touch...");
            });
        }
    }

    // Attach to EVERY interaction type to catch the first movement
    document.addEventListener('click', unlockAudio);
    document.addEventListener('touchstart', unlockAudio);
    document.addEventListener('scroll', unlockAudio);
    document.addEventListener('keydown', unlockAudio);
    
    // Try once immediately on load (works on some desktops)
    unlockAudio();


    // --- 2. STAR GENERATOR ---
    function createStars() {
      const numStars = 100;
      const body = document.body;
      for (let i = 0; i < numStars; i++) {
        let star = document.createElement("div");
        star.className = "star";
        var x = Math.random() * window.innerWidth;
        var y = Math.random() * window.innerHeight;
        star.style.left = x + 'px';
        star.style.top = y + 'px';
        var size = (Math.random() * 2) + 1;
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.animationDuration = (Math.random() * 3 + 2) + 's';
        star.style.animationDelay = (Math.random() * 2) + 's';
        body.appendChild(star);
      }
    }
    createStars();

    function engageHyperdrive() {
      const stars = document.querySelectorAll('.star');
      stars.forEach(star => {
        const speed = (Math.random() * 0.5) + 0.2;
        star.style.animation = `hyperSpeed ${speed}s linear infinite`;
      });
    }

    const yesButton = document.getElementById('yesButton');
    const noButton = document.getElementById('noButton');
    const mainContainer = document.getElementById('mainContainer');
    const successContainer = document.getElementById('successContainer');
    const videoElement = document.getElementById('spaceshipVideo');

    // --- 3. RUNAWAY BUTTON ---
    const moveButton = function (e) {
      if(e && e.type === 'touchstart') e.preventDefault();
      
      // Safety check: ensure music is playing if they try to hit No
      unlockAudio();

      const maxWidth = window.innerWidth - noButton.offsetWidth - 40;
      const maxHeight = window.innerHeight - noButton.offsetHeight - 40;
      
      const x = Math.max(20, Math.random() * maxWidth);
      const y = Math.max(20, Math.random() * maxHeight);
      
      noButton.style.position = "fixed"; 
      noButton.style.left = `${x}px`;
      noButton.style.top = `${y}px`;
    };

    noButton.addEventListener("mouseover", moveButton);
    noButton.addEventListener("click", moveButton);
    noButton.addEventListener("touchstart", moveButton, {passive: false});

    // --- 4. YES BUTTON LOGIC ---
    yesButton.addEventListener("click", () => {
      // Safety check: ensure music is playing
      unlockAudio();

      mainContainer.style.display = 'none';
      document.querySelector('p').style.display = 'none';

      // Play Muted Video (Music continues playing from background)
      videoElement.style.display = 'block';
      videoElement.play();
      
      // When Video Ends...
      videoElement.onended = function() {
        videoElement.style.opacity = '0';
        videoElement.style.transition = 'opacity 1s';
        
        // Show Success Page
        successContainer.style.display = 'flex';
        engageHyperdrive();

        confetti({
          particleCount: 150,
          spread: 100,
          origin: { y: 0.6 },
          colors: ['#ff69b4', '#ffffff', '#00c3ff']
        });

        startBouncingImage();
      };
    });

    function startBouncingImage() {
      const bounceImage = document.createElement("img");
      bounceImage.src = "./images/us.jpg"; 
      bounceImage.onerror = function() { this.style.display = 'none'; };
      
      bounceImage.style.position = "fixed"; 
      bounceImage.style.width = "150px"; 
      bounceImage.style.height = "150px";
      bounceImage.style.borderRadius = "50%";
      bounceImage.style.border = "5px solid #ec4899"; 
      bounceImage.style.objectFit = "cover";
      bounceImage.style.zIndex = "0"; 
      document.body.appendChild(bounceImage);

      let x = Math.random() * (window.innerWidth - 150);
      let y = Math.random() * (window.innerHeight - 150);
      let dx = 2; let dy = 2;

      function animateBounce() {
        if (x + 150 >= window.innerWidth || x <= 0) dx = -dx;
        if (y + 150 >= window.innerHeight || y <= 0) dy = -dy;
        x += dx;
        y += dy;
        bounceImage.style.left = x + "px";
        bounceImage.style.top = y + "px";
        requestAnimationFrame(animateBounce);
      }
      animateBounce();
    }
  </script>
</body>
</html>
